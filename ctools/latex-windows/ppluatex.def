%%
%% This is file `ppluatex.def',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% pdfpages.dtx  (with options: `ppluatexdef')
%% 
%% This file is part of the pdfpages package.
%% 
%% Copyright (C) 2001-2017 Andreas MATTHIAS
%%
%% This work may be distributed and/or modified under the conditions
%% of the LaTeX Project Public License, either version 1.3c
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%   <http://www.latex-project.org/lppl.txt>.
%%
%% This work has the LPPL maintenance status `maintained'.
%%
%% The Current Maintainer of this work is
%%   Andreas Matthias <andreas.matthias@gmail.com>.
%%
%% Please send error reports and suggestions for improvements to
%%   Andreas MATTHIAS <andreas.matthias@gmail.com>.
%%
\def\AM@fileversion{v0.5l}
\def\AM@Git@Date@process$#1: #2 #3${\AM@Git@Date@process@i#2\END}
\def\AM@Git@Date@process@i#1-#2-#3\END{\def\AM@Git@Date{#1/#2/#3}}
\def\AM@Git@SHA@process$#1: #2${\def\AM@Git@SHA{#2}}
\AM@Git@Date@process$Date: 2017-10-31 14:12:08 +0100 $
\AM@Git@SHA@process$SHA-1: 9deefd6c8c22356ce47773245098390089885925 $
\ProvidesFile{ppluatex.def}
   [\AM@Git@Date\space\AM@fileversion\space
    Pdfpages driver for LuaTeX (AM)]
\ifnum\luatexversion<85
  \let\AM@outputmode\pdfoutput
  \let\AM@saveimageresource\pdfximage
  \let\AM@lastsavedimageresourcepages\pdflastximagepages
  \let\AM@luatexpagewidth\pdfpagewidth
  \let\AM@luatexpageheight\pdfpageheight
  \let\AM@annotation\pdfannot
  \let\AM@thread\pdfthread
  \let\AM@destination\pdfdest
\else
  \let\AM@outputmode\outputmode
  \let\AM@saveimageresource\saveimageresource
  \let\AM@lastsavedimageresourcepages\lastsavedimageresourcepages
  \let\AM@luatexpagewidth\pagewidth
  \let\AM@luatexpageheight\pageheight
  \protected\def\AM@annotation {\pdfextension annot }%
  \protected\def\AM@thread {\pdfextension thread }%
  \protected\def\AM@destination {\pdfextension dest }%
\fi
\ifcase\AM@outputmode
  \input{ppnull.def}
  \expandafter\endinput
\fi

\let\AM@Gread@@pdftex\Gread@@pdftex
\renewcommand*{\Gread@@pdftex}[1]{%
  \xdef\AM@currentdocname@fix{#1}%
  \AM@Gread@@pdftex{#1}%
}
\def\AM@getpagecount{%
  \setbox\@tempboxa=\hbox{\includegraphics{\AM@currentdocname}}%
  \AM@saveimageresource{\AM@currentdocname@fix}%
  \edef\AM@pagecount{\the\AM@lastsavedimageresourcepages}%
}
\def\AM@getpagedimen{%
  \AM@pagewidth=\paperwidth
  \AM@pageheight=\paperheight
}
\def\AM@setpagedimen{%
  \AM@luatexpagewidth\AM@pagewidth
  \AM@luatexpageheight\AM@pageheight
}
\let\AM@pagesize@boogie\relax
\let\AM@fitpaper@special\relax
\def\AM@findfile#1{%
  \AM@findfile@i{#1}{pdf}%
  \AM@findfile@ii{#1}%
}
\AtBeginDocument{%
\@ifpackageloaded{grffile}{%
  \let\AM@IfFileExists\grffile@IfFileExists}{%
  \let\AM@IfFileExists\IfFileExists}%
}
\def\AM@setRotate{\PLS@Rotate{90}}
\def\AM@resetRotate{\PLS@Rotate{0}}
\def\AM@linktodoc@special@begin{%
    \AM@annotation width \wd\@tempboxa
                   height \ht\@tempboxa
                   depth \dp\@tempboxa
                   {/Subtype /Link /Border [0 0 0]
                    /A << /S /GoToR
                          /F (\AM@linkfilename)
                          /D [\AM@linktodoc@page@m@ne \AM@linktodocfit]
                          \ifAM@newwindow/NewWindow true\fi >>}%
}
\let\AM@linktodoc@special@end\relax
\def\AM@survey@special@begin{%
    \AM@annotation width \wd\@tempboxa
                   height \ht\@tempboxa
                   depth \dp\@tempboxa
                   {/Subtype /Link /Border [0 0 0]
                    /A << /S /GoTo
                          /D (pdfpages.\AM@linktodoc@page@m@ne) >>}%
}
\let\AM@survey@special@end\relax
\def\AM@thread@special@begin{%
      \AM@thread width \wd\@tempboxa
                 height \ht\@tempboxa
                 depth \dp\@tempboxa
                 attr {/I <<\threadinfodict>>}%
                 name {\AM@threadname}%
}
\let\AM@thread@special@end\relax
\def\AM@view{fit}
\def\AM@dest@special{\AM@destination name {\AM@linkname.\AM@page} \AM@view}
\def\AM@anchor@special{\AM@destination name {pdfpages.\the\count1} fit}
\def\AM@convert@dest#1{%
  \expandafter\AM@convert@dest@i\ifdim\z@=0pt#1 \END\fi}
\def\AM@convert@dest@i#1 #2\END{%
  \begingroup
  \def\tag{#1}%
  \def\x{FitH}%
  \ifx\x\tag
    \gdef\AM@view{fith}%
  \else
    \def\x{FitBH}%
    \ifx\x\tag
      \gdef\AM@view{fitbh}%
    \else
      \def\x{FitV}%
      \ifx\x\tag
        \gdef\AM@view{fitv}%
      \else
        \def\x{FitBV}%
        \ifx\x\tag
          \gdef\AM@view{fitbv}%
        \else
          \def\x{FitR}%
          \ifx\x\tag
            \gdef\AM@view{fitr}%
            \PackageWarningNoLine{pdfpages}{%
              `linkfit=FitR' is not supported,
              I will try `linkfit=Region'.}%
            \def\tag{region}%
          \else
            \def\x{FitB}%
            \ifx\x\tag
              \gdef\AM@view{fitb}%
            \else
              \def\x{XZY}%
              \ifx\x\tag
                \gdef\AM@view{xyz zoom #2}%
              \else
                \def\x{Region}%
                \ifx\x\tag
                  \gdef\AM@view{fitr
                                width\the\wd\@tempboxa\space
                                height0pt depth\AM@region@depth}%
                \else
                  \gdef\AM@view{fit}%
                \fi
              \fi
            \fi
          \fi
        \fi
      \fi
    \fi
  \fi
  \endgroup
}
\def\AM@region@calc{%
  \setlength{\@tempdima}{\ht\@tempboxa + \dp\@tempboxa}%
  \edef\AM@region@depth{\the\@tempdima}%
}
\let\AM@disable@includegraphics\relax
\endinput
%%
%% End of file `ppluatex.def'.
